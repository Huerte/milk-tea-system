{% extends 'base.html' %}

{% block title %}Choose Payment Method - Milk Tea System{% endblock %}

{% block content %}
<div class="payment-method-container">
    <div style="text-align: center; margin-bottom: 2.5rem;">
        <h2 style="font-size: 2.5rem; color: var(--primary-purple); margin-bottom: 0.5rem;"><span class="material-icons" style="font-size: 2.5rem; vertical-align: middle;">payment</span> Choose Payment Method</h2>
        <p style="font-size: 1.1rem; color: var(--text-light);">Select cash or credit card payment</p>
    </div>
    
    <div class="selected-item-summary">
        <h3 style="color: var(--primary-purple); margin-bottom: 1.5rem; font-size: 1.5rem;"><span class="material-icons" style="vertical-align: middle;">receipt</span> Your Order Summary</h3>
        <div class="item-card">
            <h4 style="font-size: 1.3rem; margin-bottom: 1rem;">{{ current_item.drink_name }}</h4>
            <p style="margin: 0.5rem 0;"><strong>Size:</strong> {{ current_item.size_name }}</p>
            {% if current_item.flavor_name %}
            <p style="margin: 0.5rem 0;"><strong>Flavor:</strong> {{ current_item.flavor_name }}</p>
            {% endif %}
            {% if current_item.toppings %}
            <p style="margin: 0.5rem 0;"><strong>Premium Add-ons:</strong> 
                {% for topping in current_item.toppings %}
                    {{ topping.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
            {% endif %}
            <p style="margin: 0.5rem 0;"><strong>Quantity:</strong> {{ current_item.quantity }}</p>
            <p class="total-price" style="font-size: 1.8rem; color: var(--accent-green); margin-top: 1rem; font-weight: 700;">Total: â‚±{{ current_item.item_price }}</p>
        </div>
    </div>
    
    <div class="payment-methods">
        <h3>Select Payment Method:</h3>
        
        <form method="post" class="payment-form">
            {% csrf_token %}
            
            <div class="payment-options">
                <label class="payment-option">
                    <input type="radio" name="payment_method" value="cash" required>
                    <div class="option-card">
                        <h4><span class="material-icons">payments</span> Cash Payment</h4>
                        <p>Pay with cash at the counter</p>
                        <div class="payment-details">
                            <small><span class="material-icons" style="font-size: 0.9rem;">check</span> No processing fees</small><br>
                            <small><span class="material-icons" style="font-size: 0.9rem;">check</span> Immediate payment</small>
                        </div>
                    </div>
                </label>
                
                <label class="payment-option">
                    <input type="radio" name="payment_method" value="credit_card" required>
                    <div class="option-card">
                        <h4><span class="material-icons">credit_card</span> Credit Card</h4>
                        <p>Pay with credit/debit card</p>
                        <div class="payment-details">
                            <small><span class="material-icons" style="font-size: 0.9rem;">check</span> Secure payment</small><br>
                            <small><span class="material-icons" style="font-size: 0.9rem;">check</span> Digital receipt</small>
                        </div>
                    </div>
                </label>
            </div>
            
            <div class="payment-info" id="credit-card-info" style="display: none;">
                <h4>Credit Card Information</h4>
                <div class="form-group">
                    <input type="text" placeholder="Card Number" class="form-control">
                </div>
                <div class="form-row">
                    <input type="text" placeholder="MM/YY" class="form-control">
                    <input type="text" placeholder="CVV" class="form-control">
                </div>
            </div>
            
            <div class="action-buttons">
                <a href="{% url 'choose_specifics' %}" class="btn btn-secondary">
                    <span class="material-icons">arrow_back</span> Back to Selection
                </a>
                <button type="submit" class="btn btn-primary">
                    <span class="material-icons">arrow_forward</span> Proceed to Counter
                </button>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const paymentOptions = document.querySelectorAll('input[name="payment_method"]');
    const creditCardInfo = document.getElementById('credit-card-info');
    
    paymentOptions.forEach(option => {
        option.addEventListener('change', function() {
            if (this.value === 'credit_card') {
                creditCardInfo.style.display = 'block';
            } else {
                creditCardInfo.style.display = 'none';
            }
        });
    });
});
</script>
{% endblock %}
